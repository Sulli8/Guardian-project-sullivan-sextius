{"ast":null,"code":"import { StepsComponent } from '../steps/steps.component';\nimport { CommonModule } from '@angular/common';\nimport { StepTemplateComponent } from '../step-template/step-template.component';\nimport { Validators } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/steps.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"src/services/user.service\";\nimport * as i5 from \"@angular/common\";\nfunction FormPageComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-step-template\", 6);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"step\", i0.ɵɵpipeBind1(2, 4, ctx_r0.currentStep))(\"stepForm1\", ctx_r0.stepForm1)(\"stepForm2\", ctx_r0.stepForm2)(\"stepForm3\", ctx_r0.stepForm3);\n  }\n}\nfunction FormPageComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-step-template\", 6);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"step\", i0.ɵɵpipeBind1(2, 4, ctx_r0.currentStep))(\"stepForm1\", ctx_r0.stepForm1)(\"stepForm2\", ctx_r0.stepForm2)(\"stepForm3\", ctx_r0.stepForm3);\n  }\n}\nfunction FormPageComponent_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-step-template\", 6);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"step\", i0.ɵɵpipeBind1(2, 4, ctx_r0.currentStep))(\"stepForm1\", ctx_r0.stepForm1)(\"stepForm2\", ctx_r0.stepForm2)(\"stepForm3\", ctx_r0.stepForm3);\n  }\n}\nexport let FormPageComponent = /*#__PURE__*/(() => {\n  class FormPageComponent {\n    stepsService;\n    router;\n    fb;\n    userDataService;\n    currentStep;\n    // Formulaires pour chaque étape\n    stepForm1;\n    stepForm2;\n    stepForm3;\n    user;\n    constructor(stepsService, router, fb, userDataService) {\n      this.stepsService = stepsService;\n      this.router = router;\n      this.fb = fb;\n      this.userDataService = userDataService;\n    }\n    ngOnInit() {\n      // Initialisation des formulaires pour chaque étape\n      this.initForms();\n      // Obtenez l'étape actuelle à partir du service\n      this.currentStep = this.stepsService.getCurrentStep();\n    }\n    // Initialisation des formulaires pour chaque étape\n    initForms() {\n      this.stepForm1 = this.fb.group({\n        name: ['', Validators.required],\n        email: ['', [Validators.required, Validators.email]]\n      });\n      this.stepForm2 = this.fb.group({\n        address: ['', Validators.required],\n        city: ['', Validators.required]\n      });\n      this.stepForm3 = this.fb.group({\n        username: ['', Validators.required],\n        password: ['', [Validators.required]]\n      });\n    }\n    onNextStep() {\n      if (!this.stepsService.isLastStep()) {\n        this.stepsService.moveToNextStep();\n      } else {\n        this.onSubmit();\n      }\n    }\n    showButtonLabel() {\n      console.log(\"FINIS\");\n      return !this.stepsService.isLastStep() ? 'Continue' : 'Finish';\n    }\n    onSubmit() {\n      console.log(\"ON SUBMIT\");\n      this.userDataService.submitUserData().subscribe({\n        next: response => {\n          console.log('Réponse de l\\'API :', response); // Afficher la réponse de l'API\n        },\n        error: error => {\n          console.error('Erreur lors de la requête API :', error); // Afficher l'erreur si l'appel échoue\n        }\n      });\n    }\n    static ɵfac = function FormPageComponent_Factory(t) {\n      return new (t || FormPageComponent)(i0.ɵɵdirectiveInject(i1.StepsService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.UserService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FormPageComponent,\n      selectors: [[\"app-form-page\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 12,\n      vars: 10,\n      consts: [[1, \"form-page-container\"], [1, \"step-page-container\"], [1, \"form-step\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [1, \"form-continue-btn\", 3, \"click\", \"disabled\"], [3, \"step\", \"stepForm1\", \"stepForm2\", \"stepForm3\"]],\n      template: function FormPageComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵelement(1, \"app-steps\");\n          i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2);\n          i0.ɵɵelementContainerStart(4, 3);\n          i0.ɵɵpipe(5, \"async\");\n          i0.ɵɵtemplate(6, FormPageComponent_ng_container_6_Template, 3, 6, \"ng-container\", 4)(7, FormPageComponent_ng_container_7_Template, 3, 6, \"ng-container\", 4)(8, FormPageComponent_ng_container_8_Template, 3, 6, \"ng-container\", 4);\n          i0.ɵɵelementContainerEnd();\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(9, \"button\", 5);\n          i0.ɵɵpipe(10, \"async\");\n          i0.ɵɵlistener(\"click\", function FormPageComponent_Template_button_click_9_listener() {\n            return ctx.onNextStep();\n          });\n          i0.ɵɵtext(11);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          let tmp_0_0;\n          let tmp_4_0;\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngSwitch\", (tmp_0_0 = i0.ɵɵpipeBind1(5, 6, ctx.currentStep)) == null ? null : tmp_0_0.stepIndex);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngSwitchCase\", 1);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngSwitchCase\", 2);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngSwitchCase\", 3);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", !((tmp_4_0 = i0.ɵɵpipeBind1(10, 8, ctx.currentStep)) == null ? null : tmp_4_0.isComplete));\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate1(\" \", ctx.showButtonLabel(), \" \");\n        }\n      },\n      dependencies: [StepsComponent, CommonModule, i5.NgSwitch, i5.NgSwitchCase, i5.AsyncPipe, StepTemplateComponent, HttpClientModule],\n      styles: [\".form-page-container{display:flex;flex-direction:column;height:100%;width:100%}.step-page-container{flex:1;margin:0 32px}.form-continue-btn{color:#fff;background:#00f;padding:20px;border-radius:50px;font-size:1.15em;cursor:pointer;border:none!important;margin:32px}.form-continue-btn:disabled{opacity:.5;cursor:not-allowed!important}\\n\"],\n      encapsulation: 2\n    });\n  }\n  return FormPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}