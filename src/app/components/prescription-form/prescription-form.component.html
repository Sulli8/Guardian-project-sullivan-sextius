<app-nav-bar></app-nav-bar>
<div class="container">
    <h2>Add a prescription</h2>
    <form class="prescriptionForm" [formGroup]="prescriptionForm" (ngSubmit)="onSubmit()">
  
      <!-- Liste des médicaments -->
      <div class="form-group">
        <label for="medicationId">Medication</label>
        <select id="medicationId" class="select-form form-control" formControlName="medicationId">
          <option value="" disabled selected>Select a medication</option>
          <option *ngFor="let medication of medications" [value]="medication._id">
            {{ medication.name }}
          </option>
        </select>
        <div *ngIf="prescriptionForm.get('medicationId')?.invalid && prescriptionForm.get('medicationId')?.touched" class="text-danger">
          Vous devez sélectionner un médicament.
        </div>
      </div>
    
      <!-- Dosage -->
      <div class="form-group">
        <label for="dosage">Dosage</label>
        <input
          id="dosage"
          type="text"
          class="form-control"
          formControlName="dosage"
          placeholder="Entrez le dosage"
        />
        <div *ngIf="prescriptionForm.get('dosage')?.invalid && prescriptionForm.get('dosage')?.touched" class="text-danger">
          Le dosage est requis.
        </div>
      </div>
  <!-- Date de prescription -->
  <div class="form-group">
    <label for="datePrescribed">Date de prescription</label>
    <input
      id="datePrescribed"
      type="date"
      class="form-control"
      formControlName="datePrescribed"
      [value]="prescriptionForm.get('datePrescribed')?.value"
    />
    <div *ngIf="prescriptionForm.get('datePrescribed')?.invalid && prescriptionForm.get('datePrescribed')?.touched" class="text-danger">
      La date est requise.
    </div>
  </div>

  <!-- Heure de prescription -->
  <div class="form-group">
    <label for="timePrescribed">Heure de prescription</label>
    <input
      id="timePrescribed"
      type="time"
      class="form-control"
      formControlName="timePrescribed"
      [value]="prescriptionForm.get('timePrescribed')?.value"
    />
    <div *ngIf="prescriptionForm.get('timePrescribed')?.invalid && prescriptionForm.get('timePrescribed')?.touched" class="text-danger">
      L'heure est requise.
    </div>
  </div>
      <!-- Fréquence -->
      <div class="form-group">
        <label for="frequence">Fréquence</label>
          <select formControlName="frequence">
            <option value="1 fois par jour">1 fois par jour</option>
            <option value="2 fois par jour">2 fois par jour</option>
            <option value="toutes les 4 heures">Toutes les 4 heures</option>
            <option value="toutes les 8 heures">Toutes les 8 heures</option>
            <option value="toutes les 12 heures">Toutes les 12 heures</option>
          </select>
          <div *ngIf="prescriptionForm.get('frequence')?.invalid && prescriptionForm.get('frequence')?.touched" class="text-danger">
            La fréquence est requise.
          </div>
      </div>
  
      <!-- Bouton de soumission -->
      <button type="submit" class="input-submit btn btn-primary" [disabled]="prescriptionForm.invalid">
        Soumettre
      </button>
    </form>
</div>
