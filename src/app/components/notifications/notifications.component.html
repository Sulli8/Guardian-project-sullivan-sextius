<app-nav-bar></app-nav-bar>
<div class="notifications-container">
  <div class="sidebar-notifications">
    <div class="title">Vos notifications - <p class="count-notification">{{notifications.length}}</p></div>
    <div class="profile">
      <div *ngFor="let u of user" class="data-profile">
        <p>{{u.firstName}} - {{u.lastName | uppercase}}</p>
        <p>{{u.email}}</p>
      </div>
    </div>
    <p *ngIf="displayMessage">Merci d'autoriser les notifications dans votre navigateur</p>
    <div class="buttons-container">
      <button *ngIf="!NotifsAllowed" (click)="subscribeToPush()" class="button">
        <div class="box-btn-child">
          <p>Souscrire aux notifications</p>
        </div>
        <svg fill="#ffffff3e" height="15px" width="15px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 330 330" xml:space="preserve">
          <path id="XMLID_222_" d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001  c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213  C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606  C255,161.018,253.42,157.202,250.606,154.389z"/>
          </svg>
      </button>
      <!-- Si l'utilisateur est abonné, afficher le bouton de désabonnement -->
      <button *ngIf="NotifsAllowed" (click)="unsubscribeFromPush()" class="button">
     
        <div class="box-btn-child">
          <p> Se désabonner des notifications</p>
        </div>
        <svg  fill="#ffffff3e" height="15px" width="15px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 330 330" xml:space="preserve">
          <path id="XMLID_222_" d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001  c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213  C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606  C255,161.018,253.42,157.202,250.606,154.389z"/>
          </svg>
      </button>

      <div *ngIf="NotifsAllowed" class="buttons-container-child">
        <button (click)="exportPdf()" class="button">

          <div class="box-btn-child">
            <p> Exporter mes données</p>
          </div>
          <svg  fill="#ffffff3e" height="15px" width="15px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 330 330" xml:space="preserve">
            <path id="XMLID_222_" d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001  c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213  C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606  C255,161.018,253.42,157.202,250.606,154.389z"/>
            </svg>
        </button>
        <button class="button">
          <div class="box-btn-child">
            <p> Supprimer mes données</p>
          </div>
          <svg  fill="#ffffff3e" height="15px" width="15px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 330 330" xml:space="preserve">
            <path id="XMLID_222_" d="M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001  c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213  C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606  C255,161.018,253.42,157.202,250.606,154.389z"/>
            </svg>
          
        </button>
      </div>
    </div>
  </div>

  <div class="container-box">
    <div class="container-list-notification">
      <div *ngFor="let notification of notifications" class="drug-item">
        <div class="drugs">
          <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 512.000000 512.000000" preserveAspectRatio="xMidYMid meet">

            <g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)" fill="#f1c40f" stroke="none">
            <path d="M2476 4546 c-49 -18 -113 -79 -137 -131 -10 -22 -19 -63 -19 -91 0 -27 -6 -58 -12 -67 -7 -9 -56 -30 -108 -47 -390 -127 -632 -466 -715 -1000 -8 -58 -20 -229 -25 -380 -12 -362 -32 -512 -90 -689 -54 -165 -122 -274 -280 -445 -109 -119 -124 -144 -124 -217 -1 -71 39 -142 99 -173 l40 -21 1461 0 1460 0 41 27 c51 33 81 82 89 142 11 75 -13 119 -145 266 -265 296 -329 500 -351 1130 -6 198 -15 310 -30 399 -54 311 -163 550 -329 725 -114 118 -223 185 -391 240 l-95 31 -12 79 c-15 98 -50 159 -115 199 -57 36 -151 46 -212 23z"/>
            <path d="M2083 1018 c25 -315 264 -502 573 -449 217 38 355 202 380 451 l7 70 -483 0 -483 0 6 -72z"/>
            </g>
            </svg>
          <div class="medicament-details">
            <div>{{ notification.title }}</div>
            <div>{{ notification.body }}</div>
            <div class="id-drug">{{ notification.dateNotification }}</div>
            <a (click)="hrefPrescription(notification.url)">Cliquez ici pour voir la prescription</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
